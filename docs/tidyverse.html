<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 2 Tidyverse | R Training Resources and Tips</title>
  <meta name="description" content="Some R Training Resources and Tips." />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 2 Tidyverse | R Training Resources and Tips" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://alan-y.github.io/r-resources-tips/" />
  
  <meta property="og:description" content="Some R Training Resources and Tips." />
  <meta name="github-repo" content="https://github.com/alan-y/r-resources-tips/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 2 Tidyverse | R Training Resources and Tips" />
  
  <meta name="twitter:description" content="Some R Training Resources and Tips." />
  

<meta name="author" content="Alan Yeung" />


<meta name="date" content="2019-10-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started.html"/>
<link rel="next" href="efficiency.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Training Resources and Tips</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a><ul>
<li class="chapter" data-level="1.1" data-path="getting-started.html"><a href="getting-started.html#understanding-r-from-the-perspective-of-excel"><i class="fa fa-check"></i><b>1.1</b> Understanding R from the Perspective of Excel</a></li>
<li class="chapter" data-level="1.2" data-path="getting-started.html"><a href="getting-started.html#setting-up-rstudio"><i class="fa fa-check"></i><b>1.2</b> Setting Up RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="getting-started.html"><a href="getting-started.html#getting-help"><i class="fa fa-check"></i><b>1.3</b> Getting Help</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>2</b> Tidyverse</a><ul>
<li class="chapter" data-level="2.1" data-path="tidyverse.html"><a href="tidyverse.html#installation"><i class="fa fa-check"></i><b>2.1</b> Installation</a></li>
<li class="chapter" data-level="2.2" data-path="tidyverse.html"><a href="tidyverse.html#getting-data-into-r"><i class="fa fa-check"></i><b>2.2</b> Getting Data into R</a></li>
<li class="chapter" data-level="2.3" data-path="tidyverse.html"><a href="tidyverse.html#data-manipulation-with-dplyr"><i class="fa fa-check"></i><b>2.3</b> Data Manipulation with dplyr</a><ul>
<li class="chapter" data-level="2.3.1" data-path="tidyverse.html"><a href="tidyverse.html#working-with-multiple-datasets"><i class="fa fa-check"></i><b>2.3.1</b> Working with Multiple Datasets</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tidyverse.html"><a href="tidyverse.html#reshaping-data-with-tidyr"><i class="fa fa-check"></i><b>2.4</b> Reshaping Data with tidyr</a></li>
<li class="chapter" data-level="2.5" data-path="tidyverse.html"><a href="tidyverse.html#other-data-manipulation-tips"><i class="fa fa-check"></i><b>2.5</b> Other Data Manipulation Tips</a><ul>
<li class="chapter" data-level="2.5.1" data-path="tidyverse.html"><a href="tidyverse.html#datestimes"><i class="fa fa-check"></i><b>2.5.1</b> Dates/Times</a></li>
<li class="chapter" data-level="2.5.2" data-path="tidyverse.html"><a href="tidyverse.html#strings"><i class="fa fa-check"></i><b>2.5.2</b> Strings</a></li>
<li class="chapter" data-level="2.5.3" data-path="tidyverse.html"><a href="tidyverse.html#janitor"><i class="fa fa-check"></i><b>2.5.3</b> janitor</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="tidyverse.html"><a href="tidyverse.html#further-resources"><i class="fa fa-check"></i><b>2.6</b> Further Resources</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="efficiency.html"><a href="efficiency.html"><i class="fa fa-check"></i><b>3</b> Efficiency</a><ul>
<li class="chapter" data-level="3.1" data-path="efficiency.html"><a href="efficiency.html#extracting-data-from-databases"><i class="fa fa-check"></i><b>3.1</b> Extracting Data from Databases</a><ul>
<li class="chapter" data-level="3.1.1" data-path="efficiency.html"><a href="efficiency.html#extracting-data-from-smra"><i class="fa fa-check"></i><b>3.1.1</b> Extracting Data from SMRA</a></li>
<li class="chapter" data-level="3.1.2" data-path="efficiency.html"><a href="efficiency.html#dbplyr"><i class="fa fa-check"></i><b>3.1.2</b> dbplyr</a></li>
<li class="chapter" data-level="3.1.3" data-path="efficiency.html"><a href="efficiency.html#temporary-objects"><i class="fa fa-check"></i><b>3.1.3</b> Temporary Objects</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="efficiency.html"><a href="efficiency.html#processing"><i class="fa fa-check"></i><b>3.2</b> Processing</a><ul>
<li class="chapter" data-level="3.2.1" data-path="efficiency.html"><a href="efficiency.html#for-loops"><i class="fa fa-check"></i><b>3.2.1</b> For Loops</a></li>
<li class="chapter" data-level="3.2.2" data-path="efficiency.html"><a href="efficiency.html#avoiding-loops"><i class="fa fa-check"></i><b>3.2.2</b> Avoiding Loops</a></li>
<li class="chapter" data-level="3.2.3" data-path="efficiency.html"><a href="efficiency.html#finding-slow-parts-of-code"><i class="fa fa-check"></i><b>3.2.3</b> Finding Slow Parts of Code</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="efficiency.html"><a href="efficiency.html#importing-and-exporting-data"><i class="fa fa-check"></i><b>3.3</b> Importing and Exporting Data</a></li>
<li class="chapter" data-level="3.4" data-path="efficiency.html"><a href="efficiency.html#further-resources-1"><i class="fa fa-check"></i><b>3.4</b> Further Resources</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Training Resources and Tips</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1">
<h1><span class="header-section-number">Chapter 2</span> Tidyverse</h1>
<p>This statement from the <a href="https://www.tidyverse.org">official tidyverse website</a> describes what the tidyverse is</p>
<blockquote>
<p>The tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.</p>
</blockquote>
<p>Further background information on what the tidyverse is can be found in the R Views blog: <a href="https://rviews.rstudio.com/2017/06/08/what-is-the-tidyverse">What is the tidyverse?</a>. In addition, Hadley Wickham has laid out his principles for tidyverse packages within his <a href="https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html">tidy tools manifesto</a>.</p>
<p>At this point, you should watch this video to get an introduction to data wrangling with the tidyverse.<br />
<a href="https://www.youtube.com/watch?v=jOd65mR1zfw&amp;list=PL9HYL-VRX0oQOWAFoKHFQAsWAI3ImbNPk&amp;index=1">What is data wrangling? Intro, Motivation, Outline, Setup – Pt. 1 Data Wrangling Introduction</a></p>
<div id="installation" class="section level2">
<h2><span class="header-section-number">2.1</span> Installation</h2>
<p>The package can be installed and loaded with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>This loads the core set of tidyverse packages – see <a href="https://www.tidyverse.org/packages">here</a> for more details.</p>
</div>
<div id="getting-data-into-r" class="section level2">
<h2><span class="header-section-number">2.2</span> Getting Data into R</h2>
<p>The tidyverse installs a number of packages that help with getting your data into R. However, only the <a href="https://readr.tidyverse.org">readr</a> package is loaded as part of the core set of packages so the other data import packages, (<a href="https://readxl.tidyverse.org">readxl</a> and <a href="https://haven.tidyverse.org">haven</a> have to be loaded with their own <code>library()</code> calls).</p>
<ul>
<li>readr: for reading in data formats such as csv, tsv and fwf.</li>
<li>readxl: for reading in Excel data formats (.xls and .xlsx).</li>
<li>haven: for reading in SPSS, Stata and SAS data formats.</li>
</ul>
<p>RStudio also provides an ‘Import Dataset’ button to help with this. The RStudio support pages describe how to <a href="https://support.rstudio.com/hc/en-us/articles/218611977-Importing-Data-with-RStudio">import data with RStudio</a>. If you decide to use this to help you import data into R, my recommendation is to copy over the code generated in the ‘Code Preview’ box into your R script. This helps you to keep a record of the data import step in your script.</p>
<p>Besides these data types, you should familiarise yourself with R’s own data formats: .rds and .RData – .rds format can be used when saving a single object or dataset while .RData should only be used when you want to save multiple objects or datasets from your R session. These formats load fast into R and an important advantage is that they keep data exactly as they were when they were created in R (i.e. all information about variable types and metadata will be retained after saving).</p>
<ul>
<li>.rds: read in data with <code>readRDS()</code>; save data with <code>saveRDS()</code></li>
<li>.RData: read in data with <code>load()</code>; save data with <code>save()</code></li>
</ul>
</div>
<div id="data-manipulation-with-dplyr" class="section level2">
<h2><span class="header-section-number">2.3</span> Data Manipulation with dplyr</h2>
<p><a href="https://dplyr.tidyverse.org">dplyr</a> provides a set of functions (often described as <em>verbs</em>) to help with data manipulation. Most common tasks can be done using only a handful of functions: <code>select()</code>, <code>filter()</code>, <code>mutate()</code>, <code>rename()</code>, <code>arrange()</code>, <code>summarise()</code> and <code>group_by()</code> – note that <code>rename()</code> is not usually included in this list but I have included it as renaming variables comes up a lot during data cleaning/processing. Out of these functions, <code>group_by()</code> is the most complex and should probably be tackled after understanding the others; in particular, it is often used together with <code>summarise()</code>. Furthermore, two functions that often come in handy when used together with <code>mutate()</code> are <code>ifelse()</code> (or the stricter dplyr equivalent <a href="https://dplyr.tidyverse.org/reference/if_else.html"><code>if_else()</code></a>) and <a href="https://dplyr.tidyverse.org/reference/case_when.html"><code>case_when()</code></a> – these help to create new variables depending on certain conditions being met.</p>
<p>It is a good idea to understand what each of these functions does on their own first before thinking about how to <em>combine</em> multiple manipulation steps together using <a href="https://r4ds.had.co.nz/pipes.html">pipes (<code>%&gt;%</code>)</a>. Once you are comfortable with each of these functions, it should be a relatively small step to learn how to combine them together with the pipe operator; the ability to do this in a way that is relatively intuitive is one of the most powerful design features of the tidyverse. This is more or less the learning order used in the <a href="https://bookdown.org/rdpeng/rprogdatascience/managing-data-frames-with-the-dplyr-package.html">dplyr chapter of the R Programming for Data Science book</a> which is worth a read through (there is also an accompanying video for that chapter which may also help). I would definitely recommend spending a good amount of time learning dplyr as you will want to reach the point where you can use these functions without requiring much thinking.</p>
<p>A good place to get started on learning about these functions are these videos.<br />
<a href="https://www.youtube.com/watch?v=Zc_ufg4uW4U&amp;list=PL9HYL-VRX0oQOWAFoKHFQAsWAI3ImbNPk&amp;index=3">Data Manipulation Tools: dplyr – Pt 3 Intro to the Grammar of Data Manipulation with R</a><br />
<a href="https://www.youtube.com/watch?v=jWjqLW-u3hc">Hands-on dplyr tutorial for faster data manipulation in R</a> – note that this tutorial is a little old (2014) so some parts of it are out-of-date but I think it is still useful. Only minor changes will be needed to make this current and the old dplyr functions mentioned should still be useable anyway. For example, they use <code>tbl_df()</code> which can now be replaced by <code>tibble()</code> instead. You should try running the R commands yourself while watching this video to aid the learning process.</p>
<p>Once you have watched these videos, you can work through all the tutorials in the <a href="https://rstudio.cloud/learn/primers/2">Work with Data section on RStudio Cloud</a>. Then you can further consolidate this knowledge by reading through <a href="https://r4ds.had.co.nz/transform.html">data transformation chapter of the R for Data Science book</a> and working through the exercises at the end. After this, a set of four tutorials by Suzan Baert provides much more depth on what some of the basic dplyr functions can do. Again, trying to run the R codes while following along with the tutorials will be very beneficial.<br />
<a href="https://suzanbaert.netlify.com/2018/01/dplyr-tutorial-1">Data Wrangling Part 1: Basic to Advanced Ways to Select Columns</a><br />
<a href="https://suzan.rbind.io/2018/02/dplyr-tutorial-2">Data Wrangling Part 2: Transforming your columns into the right shape</a><br />
<a href="https://suzan.rbind.io/2018/02/dplyr-tutorial-3">Data Wrangling Part 3: Basic and more advanced ways to filter rows</a><br />
<a href="https://suzan.rbind.io/2018/04/dplyr-tutorial-4">Data Wrangling Part 4: Summarizing and slicing your data</a></p>
<div id="working-with-multiple-datasets" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Working with Multiple Datasets</h3>
<p>It is very likely that you will need to perform data linkage at some point so this makes it more or less essential to learn how to work with the various <em>joining</em> functions within dplyr. To get a quick overview on this, you can watch this short video.<br />
<a href="https://www.youtube.com/watch?v=AuBgYDCg1Cg&amp;list=PL9HYL-VRX0oQOWAFoKHFQAsWAI3ImbNPk&amp;index=4">Working with Two Datasets: Binds, Set Operations, and Joins – Pt 4 Intro to Data Manipulation</a></p>
<p>These <a href="https://github.com/batpigandme/tidyexplain/tree/pivot">neat animations</a> then offer a great illustration of how these joins work and a <a href="https://stat545.com/join-cheatsheet.html">cheatsheet by stat545</a> summarises this further. After this, I recommend reading three short sections of the relational data chapter in the R for Data Science book: <a href="https://r4ds.had.co.nz/relational-data.html#understanding-joins">Understanding joins</a>, <a href="https://r4ds.had.co.nz/relational-data.html#inner-join">Inner join</a>, <a href="https://r4ds.had.co.nz/relational-data.html#outer-join">Outer joins</a>.</p>
<p>Then you can follow this video tutorial – the parts about joins start from around 25 minutes into the video but if you want to further solidify your dplyr knowledge, you can watch it from the beginning. Again, note that this video is a little old (2015) so some aspects may be out-of-date but it is still useful nevertheless.<br />
<a href="https://www.youtube.com/watch?v=2mh1PqfsXVI">Going deeper with dplyr: New features in 0.3 and 0.4 (tutorial)</a></p>
<p>There is also a <a href="https://rstudio.cloud/learn/primers/4.3">Join Data Sets tutorial on RStudio Cloud</a> that you can try. Finally, you will want to read and work through all of <a href="https://r4ds.had.co.nz/relational-data.html">relational data chapter in the R for Data Science book</a> to understand how to work with multiple related datasets more thoroughly. By the end, you should be familiar with just about everything on this <a href="https://github.com/rstudio/cheatsheets/raw/master/data-transformation.pdf">Data Transformation Cheat Sheet</a>.</p>
</div>
</div>
<div id="reshaping-data-with-tidyr" class="section level2">
<h2><span class="header-section-number">2.4</span> Reshaping Data with tidyr</h2>
<p>Sometimes you will need to format your data into a specific <em>shape</em> to make it work for a certain purpose – <a href="https://tidyr.tidyverse.org">tidyr</a> is a package that has functions that help with this. For example, for output tables, you may want to have data on different years in separate columns while for analytical operations within R, it may be easier to work with ‘year’ stored in only one column (or variable); the latter format here can be considered as <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html"><em>tidy data</em></a>. In particular, the <a href="https://ggplot2.tidyverse.org">ggplot2</a> package often requires data to be in the <em>long</em> or <em>tidy</em> format. To get a better idea on this, watch this video.<br />
<a href="https://www.youtube.com/watch?v=1ELALQlO-yM&amp;list=PL9HYL-VRX0oQOWAFoKHFQAsWAI3ImbNPk&amp;index=2">Tidy Data and tidyr – Pt 2 Intro to Data Wrangling with R and the Tidyverse</a> – however please note that the <code>gather()</code> and <code>spread()</code> functions mentioned will be replaced by <a href="https://tidyr.tidyverse.org/dev/articles/pivot.html">pivoting functions</a> so you should mainly be concerned with the concepts here rather than learning about these functions specifically.</p>
<p>Then you can try the <a href="https://rstudio.cloud/learn/primers/4.1">Reshape Data tutorial on RStudio Cloud</a>. The main thing you need to be able to do with tidyr is to be confident in knowing how to transform your data from <em>wide-to-long</em> format or from <em>long-to-wide</em> format. However, if you want to know more about what tidyr can do or find out more about tidy data in general, please refer to the <a href="https://r4ds.had.co.nz/tidy-data.html">tidy data chapter in the R for Data Science book</a> (keeping in mind the caveat made previously about the change to using pivoting functions).</p>
</div>
<div id="other-data-manipulation-tips" class="section level2">
<h2><span class="header-section-number">2.5</span> Other Data Manipulation Tips</h2>
<p>As you progress further along with learning to manipulate data using the tidyverse, you will inevitably encounter situations where you need to know more about how to deal with specific types of data such as dates/times and string variables. In addition, there will also be times when you wish there was a convenient and quick way to process data – luckily there usually is in R. Please note that some of the material mentioned in this section is probably optional until you specifically have a need for it but I recommend that you go through some of it anyway to build an awareness of where to look for solutions when you need it.</p>
<div id="datestimes" class="section level3">
<h3><span class="header-section-number">2.5.1</span> Dates/Times</h3>
<p>The main package within the tidyverse for dealing with dates and times is the <a href="https://lubridate.tidyverse.org/reference/lubridate-package.html">lubridate</a> package. This is not loaded with the core set of tidyverse packages so has to be loaded separately by typing <code>library(lubridate)</code>. The main reference text for learning about how to work with dates/times using lubridate is the <a href="https://r4ds.had.co.nz/dates-and-times.html">dates and times chapter in R for Data Science</a>. Dates/times can sometimes be very complex (e.g. when thinking about time calculations across timezones) but it is likely that you will usually only need to perform fairly simple data processing operations involving dates. In this case, you will only really need to know a small number of functions from lubridate:</p>
<ul>
<li><code>dmy()</code>, <code>mdy()</code>, <code>ymd()</code> to convert text to a Date format in R, e.g. <code>ymd("2001/05/20")</code> would convert the text “2001/05/20” so that R can recognise this as 20 May 2001.</li>
<li><code>year()</code>, <code>month()</code>, <code>day()</code> to extract the year, month, day from a date object, e.g. <code>year(ymd("2001/05/20"))</code> would extract 2001.</li>
</ul>
</div>
<div id="strings" class="section level3">
<h3><span class="header-section-number">2.5.2</span> Strings</h3>
<p>The <a href="https://stringr.tidyverse.org">stringr package</a> package is loaded within the core set of tidyverse packages and provides a set of consistent functions for working with string (or text) data. Again, the main reference is the <a href="https://r4ds.had.co.nz/strings.html">strings chapter in R for Data Science</a>. You will likely not need to know everything contained in that chapter but I would recommend learning some basics of using <a href="https://www.regular-expressions.info">regular expressions</a>. These can help to, for instance, filter data or create new variables according to some text pattern found in a string variable. This can sometimes be much quicker than filtering using a list of keywords, particularly if your data may contain variations on a common item (e.g. ‘Male’, ‘M’, ‘Man’) or mispellings (e.g. ‘Mal’).</p>
<p>A useful place to practice and learn how to use regular expressions is <a href="https://regexr.com">regexr</a>. There is also an RStudio addin that may help called <a href="https://www.garrickadenbuie.com/project/regexplain">regexplain</a> which was inspired by regexr but may help with your learning as it can be used within RStudio. Once you gain some familiarity on how to use regular expressions, many of the stringr functions should be relatively easy to understand and use. In particular, <code>str_detect()</code> is useful for filtering and creating variables.</p>
<p>If you are already familiar with regular expressions using base R functions and want to find out about their stringr equivalents to take advantage of the consistencies in their design, the <a href="https://stringr.tidyverse.org/articles/from-base.html">from base R to stringr vignette</a> is a handy resource. Furthermore, this blog post on <a href="https://blog.rsquaredacademy.com/regular-expression-in-r">Demystifying Regular Expressions in R</a> gives a very clear and descriptive guide to how the different base R regular expression functions work.</p>
</div>
<div id="janitor" class="section level3">
<h3><span class="header-section-number">2.5.3</span> janitor</h3>
<blockquote>
<p>The <a href="https://garthtarr.github.io/meatR/janitor.html">janitor package</a> is a R package that has simple functions for examining and cleaning dirty data. It was built with beginning and intermediate R users in mind and is optimised for user-friendliness.</p>
</blockquote>
<p>A really neat function from janitor is <a href="https://garthtarr.github.io/meatR/janitor.html#clean_names()"><code>clean_names()</code></a>. This function has various different options for cleaning variables names but the defaults usually work quite well – this will transform variable names into lower-case and <a href="https://en.wikipedia.org/wiki/Snake_case">snake-case</a>. We can use the iris dataset to see how this looks (note that <code>::</code> can be used before a function name to specify the package that the function comes from).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">names</span>(iris)</a></code></pre></div>
<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Sepal.Width&quot;  &quot;Petal.Length&quot; &quot;Petal.Width&quot; 
## [5] &quot;Species&quot;</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">names</span>(janitor<span class="op">::</span><span class="kw">clean_names</span>(iris))</a></code></pre></div>
<pre><code>## [1] &quot;sepal_length&quot; &quot;sepal_width&quot;  &quot;petal_length&quot; &quot;petal_width&quot; 
## [5] &quot;species&quot;</code></pre>
<p>This variable name cleaning can also be applied at the same time as reading in a data file. For example, when reading in an Excel file, you can use something like <code>readxl::read_excel("excel_file", .name_repair = janitor::make_clean_names)</code>.</p>
<p>Another function from janitor that is quite useful is <a href="https://garthtarr.github.io/meatR/janitor.html#tabyl()"><code>tabyl()</code></a>. This creates tables of counts, including cross-tabulations and outputs to dataframe format – this is the main benefit over using something like <code>table()</code> from base R as dataframes are often easier to manipulate, particularly with the help of the myriad tidyverse functions.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">janitor<span class="op">::</span><span class="kw">tabyl</span>(mtcars, cyl, gear)</a></code></pre></div>
<pre><code>##  cyl  3 4 5
##    4  1 8 2
##    6  2 4 1
##    8 12 0 2</code></pre>
</div>
</div>
<div id="further-resources" class="section level2">
<h2><span class="header-section-number">2.6</span> Further Resources</h2>
<p><a href="https://r4ds.had.co.nz">R for Data Science by Garrett Grolemund and Hadley Wickham</a><br />
<a href="https://jrnold.github.io/r4ds-exercise-solutions">R for Data Science: Exercise Solutions by Jeffrey B. Arnold</a><br />
<a href="https://brshallo.github.io/r4ds_solutions">Yet another ‘R for Data Science’ study guide by Bryan Shalloway</a><br />
<a href="https://bookdown.org/ndphillips/YaRrr">YaRrr! The Pirate’s Guide to R</a></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="efficiency.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/alan-y/r-resources-tips/edit/master/02-Tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
